{{ block title }}
    Math test
{{ endblock }}

{{ block content }}
{{ load staticfiles }}
<link href="{% static 'Math/Math.css' %}" rel="stylesheet">
<!-- link js-->

    <!DOCTYPE html>
    <html>
    
    <head>
    </head>
    
    <table class="table">
        <tr>
            <td><button class = "game-button" id="button1" type="button" value="{{n1}}">{{ n1 }}</button></td>
            <td><button class = "game-button" id="button2" type="button" value="{{n2}}">{{ n2 }}</button></td>
            <td><button class = "game-button" id="button3" type="button" value="{{n3}}">{{ n3 }}</button></td>
        </tr>
        <tr>
            <td><button class = "game-button" id="button4" type="button" value="{{n4}}">{{ n4 }}</button></td>
            <td><button class = "game-button" id="button5" type="button" value="{{n5}}">{{ n5 }}</button></td>
            <td><button class = "game-button" id="button6" type="button" value="{{n6}}">{{ n6 }}</button></td>
        </tr>
        <tr>
            <td><button class = "game-button" id="button7" type="button" value="{{n7}}">{{ n7 }}</button></td>
            <td><button class = "game-button" id="button8" type="button" value="{{n8}}">{{ n8 }}</button></td>
            <td><button class = "game-button" id="button9" type="button" value="{{n9}}">{{ n9 }}</button></td>
        </tr>
        <tr>
            <td><button class = "game-button" id="button10" type="button" value="{{n10}}">{{ n10 }}</button></td>
            <td><button class = "game-button" id="button11" type="button" value="{{n11}}">{{ n11 }}</button></td>
            <td><button class = "game-button" id="button12" type="button" value="{{n12}}">{{ n12 }}</button></td>
        </tr>
    </table>

    <p id="text1"></p>
    <p id="text2"></p>

    <p></p>
    
    <!-- <script src="_static/Math.js"></script> -->
    <script>
        //get elements + eventlistener
       let vButtons = document.getElementsByClassName('game-button');
              
       //set vars
       numberofclicks =0;
       dSum =0;

        // Create hidden input (Pressed Buttons)
        let correct        = document.createElement("input");
        correct.type       = 'hidden';
        correct.name       = 'correct';
        correct.id         = 'correct';
        correct.value      = '';
       
        document.addEventListener("DOMContentLoaded", function(debug=true) {
            let body=document.getElementsByClassName("otree-body")[0];
            body.appendChild(correct);
            //console.log("input inserted");
        });

       for (i = 0; i < vButtons.length; i++) {
            let button = vButtons[i];
            button.addEventListener("click", function(){
                button.style.background='#696969';
                console.log(button.value)
                dSum = + dSum + Number(button.value);
                numberofclicks = numberofclicks +1;
                
                
                if (numberofclicks==2){
                    if (dSum==10) {
                        if (correct.value == ""){
                            correct.value = 1;
                        } else {
                            correct.value = +correct.value + 1;
                        }  
                        document.getElementById("text1").innerHTML = "correct";
                        document.getElementById("text2").innerHTML = dSum;  
                        document.getElementsByClassName("otree-btn-next")[0].click(); 

                    } else {
                        document.getElementById("text1").innerHTML = "incorrect";
                        document.getElementById("text2").innerHTML = dSum;    
                        let x = document.getElementsByClassName("game-button");
                            for (j = 0; j < x.length; j++) {
                                x[j].style.background = "rgb(230, 230, 230)";
                            }
                        numberofclicks = 0;
                        dSum = 0;
                    }                   
                } 
                    
                console.log(correct.value);
                return correct
            });
        }
    </script>
    
    </html>

   {{ next_button }}
{{ endblock }}


